{"version":3,"sources":["main.js"],"names":["loadPost","$take","$set","json","count","$fullClone","clone","$clone","find","j","each","x","$","this","attr","post","img","src","alt","text","header","headerHref","desc","remove","append","tag","prepend","before","isData","data","loadCount","slideUp","document","ready","$content","$btnMore","$btnMoreBase","$contentRow","jsonDataRequest","on","dataTarget","slideToggle","hover","stop","fadeOut","fadeIn","animate","scrollTop","offset","top","margin","ajax","type","url","dataType","cache","ifModified","success","next","error","$carousel","$carouselItem","$carouselCaption","filter","opacity","css"],"mappings":"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","file":"main.js","sourcesContent":["/*global $*/\r\n'use strict';\r\n\r\n/*global $*/\r\n'use strict';\r\n\r\nfunction loadPost ($take, $set, json, count) {\r\n    var $fullClone = $take.clone(true),\r\n        $clone = $fullClone.find('div.tile'),\r\n        j = 0;\r\n    $clone.each(function () {\r\n        var x = 0;\r\n        $(this).find('div.hover img').each(function () {\r\n            $(this).attr('src', json.post[count][j].img[x].src);\r\n            $(this).attr('alt', json.post[count][j].img[x].alt);\r\n            x++;\r\n        });\r\n        $(this).find('h4 a').text(json.post[count][j].header).attr('href', json.post[count][j].headerHref);\r\n        $(this).find('p').text(json.post[count][j].desc);\r\n        $(this).find('div.table-bot a').remove();\r\n        $(this).find('.table-bot').append(json.post[count][j].tag);\r\n        j++;\r\n    });\r\n    $fullClone.prepend('<div class=\"space space-top\"></div>').append('<div class=\"space space-bot\"></div>');\r\n    $set.before($fullClone);\r\n}\r\n\r\nfunction isData ($take, $set, data) {\r\n    if (!isData.count) { isData.count = 0; }\r\n    if (!isData.json) {\r\n        if (!data) {\r\n            return false;\r\n        } else {\r\n            isData.json = data;\r\n        }\r\n    }\r\n    if (isData.count < isData.json.loadCount) {\r\n        loadPost($take, $set, isData.json, isData.count);\r\n        isData.count++;\r\n    } else {\r\n        loadPost($take, $set, isData.json, isData.count);\r\n        $set.slideUp(500);\r\n    }\r\n    return true;\r\n}\r\n\r\n$(document).ready(function () {\r\n    var $content = $('#content'),\r\n\r\n        $btnMore = $('#btn-more'),\r\n        $btnMoreBase = $btnMore.find('#btn-more-base'),\r\n\r\n        $contentRow = $content.find('div.row'),\r\n        jsonDataRequest = null;\r\n\r\n    // выпадающая форма subscribe\r\n    $(\"a[data-target='#navbar-form']\").on('click', function () {\r\n        var dataTarget = $(this).attr('data-target');\r\n        $(dataTarget).slideToggle('normal');\r\n    });\r\n\r\n    // исчезновение картинки при наведении мыши и проявление, если мышь убрать\r\n    $content.find('div.hover').hover(\r\n        function () {$('img:first-child', this).stop().fadeOut(1000);},\r\n        function () {$('img:first-child', this).stop().fadeIn(1000);}\r\n    );\r\n\r\n    // прокрутка по якорю без использования <a></a>\r\n    $('div.container-arrow').on('click', function () {\r\n        $('html, body').animate({scrollTop: $('#content').offset().top}, 1000);\r\n    });\r\n    $('div.anchor').on('click', function () {\r\n        $('html, body').animate({scrollTop: $('html, body').offset().top}, 1000);\r\n    });\r\n    // анимация кнопки See more\r\n    $btnMore.hover(\r\n        function () {$btnMoreBase.stop().animate({\"margin\": \"0 20px\"}, 500);},\r\n        function () {$btnMoreBase.stop().animate({\"margin\": \"0 5px\"}, 500);}\r\n    );\r\n    // ajax запрос на загрузку новых постов\r\n    $btnMore.on('click', function () {\r\n        if (jsonDataRequest === null) {\r\n            $.ajax({\r\n                type: \"GET\",\r\n                url: \"data/data.json\",\r\n                dataType: \"json\",\r\n                cache: true,\r\n                ifModified: true,\r\n                success: function (data) {\r\n                    jsonDataRequest = true;\r\n                    isData($contentRow, $btnMore, data);\r\n                    $('html, body').animate({scrollTop: $('.space.space-top').next().offset().top}, 1000);\r\n                },\r\n                error: function () {\r\n                    jsonDataRequest = false;\r\n                    $btnMore.slideUp(500);\r\n                }\r\n            });\r\n        } else if (jsonDataRequest === true) {\r\n            isData($contentRow, $btnMore);\r\n            $('html, body').animate({scrollTop: $('.space.space-top').next().offset().top}, 1000);\r\n        }\r\n    });\r\n    /*global $*/\r\n    'use strict';\r\n    \r\n    // плавное проявление текста в carousel-caption\r\n    var $carousel = $('#carousel'),\r\n        $carouselItem = $carousel.find('.item'),\r\n        $carouselCaption = $carousel.find('.carousel-caption');\r\n    \r\n    $carouselItem.filter('.active').find('.carousel-caption').animate({\"opacity\": \"1\"}, 2000);\r\n    \r\n    $carousel.on('slid.bs.carousel', function () {\r\n        $carouselCaption.css({\"opacity\": \"0\"});\r\n        $carouselItem.filter('.active').find('.carousel-caption').animate({\"opacity\": \"1\"}, 2000);\r\n    });\r\n});"],"sourceRoot":"/source/"}